databaseChangeLog:
  - property:
      name: varcharUnit
      value: CHAR
      dbms: oracle
  - property:
      name: varcharUnit
      value: ''
      dbms: postgresql
  - changeSet:
      id: 1719641276939
      author: limit
      changes:
        - createTable:
            tableName: pbl_explot_temps
            columns:
              - column:
                  name: id
                  type: bigint
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: data
                  type: date
              - column:
                  name: anualitat
                  type: int
              - column:
                  name: mes
                  type: int
              - column:
                  name: trimestre
                  type: int
              - column:
                  name: setmana
                  type: int
              - column:
                  name: dia
                  type: varchar(3 ${varcharUnit})
                  constraints:
                    nullable: true
        - createTable:
            tableName: pbl_explot_consulta_dim
            columns:
              - column:
                  name: id
                  type: bigint
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: entitat_id
                  type: bigint
              - column:
                  name: procediment_id
                  type: bigint
              - column:
                  name: servei_codi
                  type: varchar(64 ${varcharUnit})
              - column:
                  name: usuari_codi
                  type: varchar(255 ${varcharUnit})
        - addUniqueConstraint:
            constraintName: pbl_explot_consulta_dim_uk
            tableName: pbl_explot_consulta_dim
            columnNames: entitat_id, procediment_id, servei_codi, usuari_codi
        - createTable:
            tableName: pbl_explot_consulta_fet
            columns:
              - column:
                  name: id
                  type: bigint
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: num_rec_ok
                  type: bigint
              - column:
                  name: num_rec_error
                  type: bigint
              - column:
                  name: num_rec_pend
                  type: bigint
              - column:
                  name: num_rec_proc
                  type: bigint
              - column:
                  name: num_rec_mass_ok
                  type: bigint
              - column:
                  name: num_rec_mass_error
                  type: bigint
              - column:
                  name: num_rec_mass_pend
                  type: bigint
              - column:
                  name: num_rec_mass_proc
                  type: bigint
              - column:
                  name: num_web_ok
                  type: bigint
              - column:
                  name: num_web_error
                  type: bigint
              - column:
                  name: num_web_pend
                  type: bigint
              - column:
                  name: num_web_proc
                  type: bigint
              - column:
                  name: num_web_mass_ok
                  type: bigint
              - column:
                  name: num_web_mass_error
                  type: bigint
              - column:
                  name: num_web_mass_pend
                  type: bigint
              - column:
                  name: num_web_mass_proc
                  type: bigint
              - column:
                  name: dimensio_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: pbl_fet_dim_fk
                    references: pbl_explot_consulta_dim(id)
              - column:
                  name: temps_id
                  type: bigint
                  constraints:
                    nullable: false
                    foreignKeyName: pbl_fet_tmp_fk
                    references: pbl_explot_temps(id)
        - insert:
            tableName: pbl_config
            columns:
              - column:
                  name: key
                  value: es.caib.pinbal.tasca.auto.generar.explotacio.cron
              - column:
                  name: value
                  value:
              - column:
                  name: description_key
                  value: propietat.tasca.auto.generar.explotacio.cron
              - column:
                  name: group_code
                  value: TASQUES
              - column:
                  name: position
                  value: 4
              - column:
                  name: source_property
                  value: DATABASE
              - column:
                  name: type_code
                  value: TEXT
        - createIndex:
            tableName: pbl_consulta
            columns:
              - column:
                  name: entitat_id
              - column:
                  name: procediment_id
              - column:
                  name: servei_codi
              - column:
                  name: createdby_codi
            indexName: pbl_consulta_est_i
        - createIndex:
            tableName: pbl_consulta_hist
            columns:
              - column:
                  name: entitat_id
              - column:
                  name: procediment_id
              - column:
                  name: servei_codi
              - column:
                  name: createdby_codi
            indexName: pbl_consultah_est_i