databaseChangeLog:
- changeSet:
    id: init-trigger-1
    author: limit (generated)
    changes:
    - sql:
        dbms: oracle
        sql: "CREATE OR REPLACE TRIGGER acl_sid_idgen
BEFORE INSERT ON acl_sid
FOR EACH ROW
  BEGIN
    SELECT acl_sid_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
  END;"
    - sql:
        dbms: oracle
        sql: "CREATE OR REPLACE TRIGGER acl_class_idgen
BEFORE INSERT ON acl_class
FOR EACH ROW
  BEGIN
    SELECT acl_class_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
  END;"
    - sql:
        dbms: oracle
        sql: "CREATE OR REPLACE TRIGGER acl_oid_idgen
BEFORE INSERT ON acl_object_identity
FOR EACH ROW
  BEGIN
    SELECT acl_oid_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
  END;"
    - sql:
        dbms: oracle
        sql: "CREATE OR REPLACE TRIGGER acl_entry_idgen
BEFORE INSERT ON acl_entry
FOR EACH ROW
  BEGIN
    SELECT acl_entry_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
  END;"
    - sql:
        dbms: oracle
        sql: "CREATE OR REPLACE TRIGGER acl_entry_idgen
BEFORE INSERT ON acl_entry
FOR EACH ROW
  BEGIN
    SELECT acl_entry_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
  END;"
- changeSet:
    id: init-trigger-2
    author: limit (generated)
    changes:
    - sql:
        dbms: oracle
        sql: "CREATE OR REPLACE PROCEDURE getsecuenciaidpeticion (prefijo_param in varchar2, on_Secuencial out number) as rRegistro ROWID;
begin
select ROWID, secuencia+1 into rRegistro, on_Secuencial from core_req_secuencia_id_peticion where prefijo = prefijo_param for update;
update core_req_secuencia_id_peticion set secuencia = on_Secuencial, fechageneracion=sysdate where rowid = rRegistro;
commit;
exception when no_data_found then on_Secuencial := 1;
insert into core_req_secuencia_id_peticion (prefijo, secuencia,fechageneracion) values (prefijo_param, on_Secuencial,(SELECT SYSDATE FROM DUAL));
commit; 
end;"
